leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
#addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7, color = '#F135FF') %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>"))  %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 2,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
label = ~htmlEscape(clasificacion), fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",del_map_jiu$delito,  "</div><br>",
"<b>Nota</b>:", puntos$delito, "<br>",
"<b>Fecha</b>:", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
#addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7, color = '#F135FF') %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>"))  %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 2,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
label = ~htmlEscape(clasificacion), fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",del_map_jiu$delito,  "</div><br>",
"<b>Nota</b>:", puntos$delito, "<br>",
"<b>Fecha</b>:", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
#addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7, color = '#F135FF') %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>"))  %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 2,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
label = ~htmlEscape(clasificacion), fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>:", puntos$delito, "<br>",
"<b>Fecha</b>:", paste(puntos$fecha)))
library(htmltools)
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
#addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7, color = '#F135FF') %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>"))  %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 2,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
label = ~htmlEscape(clasificacion), fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>:", puntos$delito, "<br>",
"<b>Fecha</b>:", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
#addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7, color = '#F135FF') %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>"))  %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ", puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
View(shp)
View(shp)
black_zone<- shp %>% filter(SETT_NAME== c("FRACC LOS HEROES DE COACALCO", "VILLA DE LAS FLORES",
"EL POTRERO", "POTRERO POPULAR"))
View(black_zone)
black_zone<- shp %>% filter(SETT_NAME %in% c("FRACC LOS HEROES DE COACALCO", "VILLA DE LAS FLORES",
"EL POTRERO", "POTRERO POPULAR"))
View(black_zone)
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7, color = '#F135FF') %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>"))  %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ", puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
black_zone<- shp %>% filter(SETT_NAME %in% c("FRACC LOS HEROES DE COACALCO", "VILLA DE LAS FLORES",
"EL POTRERO", "POTRERO POPULAR", "VILLA DE LAS FLORES", "VILLA DE LAS FLORES 1RA SECC"))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7, color = '#F135FF') %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>"))  %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ", puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
View(black_zone)
View(black_zone)
View(black_zone)
black_zone<- shp %>% filter(SETT_NAME %in% c("FRACC LOS HEROES DE COACALCO", "EL POTRERO",
"POTRERO POPULAR", "VILLA DE LAS FLORES", "VILLA DE LAS FLORES 1RA SECC"))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7, color = '#F135FF') %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>"))  %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ", puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
mapa_2<-leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7, color = '#F135FF') %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>"))  %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ", puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
View(black_zone)
View(shp)
red_zone<-shp %>% filter(SETT_NAME %in% c("CONJUNTO HAB LOS PORTALES", "PORTALES", "CONJUNTO HAB LOS PORTALES"))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone, weight = 5, fillColor = '#ffcac3', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone, weight = 5, fillColor = '#619eff', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, weight = 5, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone, weight = 5, fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "red",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircles(lat=19.6328929, lng=-99.112371, radius = 3000, weight = 2, fillOpacity = 0, color = '#007bff') %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircles(lat=19.6328929, lng=-99.112371, radius = 2000, weight = 2, fillOpacity = 0, color = '#007bff') %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717", "#edd237"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados", "Radio 2km")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircles(lat=19.6328929, lng=-99.112371, radius = 2000, weight = 2, fillOpacity = 0, color = '#edd237') %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717", "orange"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados", "Radio 2km")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircles(lat=19.6328929, lng=-99.112371, radius = 2000, weight = 2, fillOpacity = 0, color = '#edd237') %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 13 ) %>%
addTiles() %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717", "orange"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados", "Radio 2km")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircles(lat=19.6328929, lng=-99.112371, radius = 2000, weight = 2, fillOpacity = 0, color = 'orange') %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 14 ) %>%
addTiles() %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717", "orange"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados", "Radio 2km")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircles(lat=19.6328929, lng=-99.112371, radius = 2000, weight = 2, fillOpacity = 0, color = 'orange') %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
mapa_2<-leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 14 ) %>%
addTiles() %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717", "orange"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados", "Radio 2km")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircles(lat=19.6328929, lng=-99.112371, radius = 2000, weight = 2, fillOpacity = 0, color = 'orange') %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
mapa_2<-leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 14 ) %>%
addTiles() %>%
addCircles(lat=19.6328929, lng=-99.112371, radius = 2000, weight = 2, fillOpacity = 0, color = 'orange') %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717", "orange"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados", "Radio 2km")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 5, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
mapa_2
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
leaflet(width ="830px", height="520px") %>%
setView(-99.09481, 19.63637, 14 ) %>%
addTiles() %>%
addCircles(lat=19.6328929, lng=-99.112371, radius = 2000, weight = 4, fillOpacity = 0, color = 'orange') %>%
addLegend(title = "Zonas", position = c("topright"),
colors =  c("#000","#279e0e", "#a61717", "orange"),
labels = c("Zonas alta incidencia", "Zonas propuestas", "Delitos reportados", "Radio 2km")) %>%
addMarkers( label ="San Pablo", lat=19.6328929, lng=-99.112371) %>%
addPolygons(data = shp_coacalco, weight = 4, fillOpacity = 0, color = '#F135FF') %>%
addPolygons(data = black_zone, fillColor = '#000', fillOpacity = 0.7) %>%
addPolygons(data = red_zone,  fillColor = '#279e0e', fillOpacity = 0.7) %>%
addPolygons(data = shp, weight = 2, fillOpacity = 0, color = '#007bff',  label = ~SETT_NAME,
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ",shp$SETT_NAME,  "</div><br>",
"<b>Tipo de vivienda</b>: ", shp$SETT_TYPE,"<br>")) %>%
addDrawToolbar(targetGroup='datos', position = "bottomleft",
editOptions = editToolbarOptions(selectedPathOptions = selectedPathOptions())) %>%
addCircleMarkers(data = puntos, radius = 5,   lat =puntos$lat, lng = puntos$lon, opacity = .9, fill = TRUE,
fillOpacity = 0.8, color = "#a61717",
stroke = FALSE, labelOptions = labelOptions(noHide=T, offset = c(-3,0), textOnly = T),
popup = paste0("<div style='font-size: 17px; font-weight:bold; text-align: center; background: white; padding: 4px; border-radius: 4px;'>","Zona: ", puntos$clasificacion,  "</div><br>",
"<b>Nota</b>: ",  puntos$delito, "<br>",
"<b>Fecha</b>: ", paste(puntos$fecha)))
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
rmarkdown::render("press.Rmd", output_file = "press.html",
params = list(graph1=graph1, titulo_1=titulo_1, tabla1=tabla1, mapa1=mapa1,
tabla2=tabla2, tabla3=tabla3, mapa_2=mapa_2))
